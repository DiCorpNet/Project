{% extends 'base.html' %}
{% load sizify extra_tags %}

{% block title %}
    Файлы пользователя {{ request.user.username }}
{% endblock %}

{% block content %}
    <div class="container-fluid">

                        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box">
                    <div class="page-title-right">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="javascript: void(0);">Hyper</a></li>
                            <li class="breadcrumb-item"><a href="javascript: void(0);">Apps</a></li>
                            <li class="breadcrumb-item active">File Manager</li>
                        </ol>
                    </div>
                    <h4 class="page-title">File Manager</h4>
                </div>
            </div>
        </div>
        <!-- end page title -->

        <div class="row">

            <!-- Right Sidebar -->
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <!-- Left sidebar -->
                        <div class="page-aside-left">

                            <div class="btn-group d-block mb-2">
                                <button type="button" class="btn btn-success dropdown-toggle w-100" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="mdi mdi-plus"></i> Create New </button>
                                <div class="dropdown-menu">
{#                                    <a class="dropdown-item" href="#"><i class="mdi mdi-folder-plus-outline me-1"></i> Folder</a>#}
                                    <a class="dropdown-item" href="#"><i class="mdi mdi-file-plus-outline me-1"></i> File</a>
{#                                    <a class="dropdown-item" href="#"><i class="mdi mdi-file-document me-1"></i> Document</a>#}
{#                                    <a class="dropdown-item" href="#"><i class="mdi mdi-upload me-1"></i> Choose File</a>#}
                                </div>
                            </div>
                            <div class="email-menu-list mt-3">
                                <a href="#" class="list-group-item border-0"><i class="mdi mdi-folder-outline font-18 align-middle me-2"></i>My Files</a>
                                <a href="#" class="list-group-item border-0"><i class="mdi mdi-folder-outline font-18 align-middle me-2"></i>My Comments</a>
                            </div>

                            <div class="mt-5">
                                <h4><span class="badge rounded-pill p-1 px-2 badge-secondary-lighten">FREE</span></h4>
                                <h6 class="text-uppercase mt-3">Storage</h6>
                                <div class="progress my-2 progress-sm">
                                    <div class="progress-bar progress-lg bg-success" role="progressbar" style="width: 46%" aria-valuenow="46" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <p class="text-muted font-12 mb-0"> (46%) of 16 GB used</p>
                            </div>

                        </div>
                        <!-- End Left sidebar -->

                        <div class="page-aside-right">

{#                            <div class="d-flex justify-content-between align-items-center">#}
{#                                <div class="app-search">#}
{#                                    <form>#}
{#                                        <div class="mb-2 position-relative">#}
{#                                            <input type="text" class="form-control" placeholder="Search files...">#}
{#                                            <span class="mdi mdi-magnify search-icon"></span>#}
{#                                        </div>#}
{#                                    </form>#}
{#                                </div>#}
{#                                <div>#}
{#                                    <button type="submit" class="btn btn-sm btn-light"><i class="mdi mdi-format-list-bulleted"></i></button>#}
{#                                    <button type="submit" class="btn btn-sm"><i class="mdi mdi-view-grid"></i></button>#}
{#                                    <button type="submit" class="btn btn-sm"><i class="mdi mdi-information-outline"></i></button>#}
{#                                </div>#}
{#                            </div>#}

                            <div class="mt-3">
                                <h5 class="mb-2">Quick Access</h5>

                                <div class="row mx-n1 g-0">
                                {% if object_list %}
                                    {% for object in object_list %}
                                        <div class="col-xxl-3 col-lg-6">
                                        <div class="card m-1 shadow-none border">
                                            <div class="p-2">
                                                <div class="row align-items-center">
                                                    <div class="col-auto">
                                                        {{ object|path_file }}
                                                    </div>
                                                    {% if object.secure %}
                                                    <div class="col ps-0">
                                                        <a href="{{ object.file.url }}" class="text-muted fw-bold" download="">{{ object.filename }}</a>
                                                        <p class="mb-0 font-13">{{ object.file.size|sizify }}</p>
                                                    </div>
                                                     {% else %}
                                                        <div class="col ps-0">
                                                            <a>{{ object.filename }} <span class="text-muted">{{ object.file.size|sizify }}</span></a>
                                                            <p>Пользователь ограничил скачивание данного файла</p>
                                                        </div>
                                                    {% endif %}
                                                </div> <!-- end row -->
                                            </div> <!-- end .p-2-->
                                        </div> <!-- end col -->
                                    </div> <!-- end col-->
                                    {% endfor %}
                                {% else %}
                                    <div class="alert alert-info">Файлов пользователя не найдено</div>
                                {% endif %}


                                </div> <!-- end row-->
                            </div> <!-- end .mt-3-->
                        </div>
                        <!-- end inbox-rightbar-->
                    </div>
                    <!-- end card-body -->
                    <div class="clearfix"></div>
                </div> <!-- end card-box -->

            </div> <!-- end Col -->
        </div><!-- End row -->

    </div>
{% endblock %}